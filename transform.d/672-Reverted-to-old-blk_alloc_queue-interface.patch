From 019eabda9313a4c20090d807b5dedff0c18c2885 Mon Sep 17 00:00:00 2001
From: Johannes Thoma <johannes@johannesthoma.com>
Date: Mon, 12 Oct 2020 15:56:33 +0200
Subject: [PATCH 6/6] Reverted to old blk_alloc_queue interface.

Now everything builds with 9.0.25
---
 drbd/drbd_main.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drbd/drbd_main.c b/drbd/drbd_main.c
index 2b5c22a..0cbf9e2 100644
--- a/drbd/drbd_main.c
+++ b/drbd/drbd_main.c
@@ -3766,7 +3766,7 @@ enum drbd_ret_code drbd_create_device(struct drbd_config_context *adm_ctx, unsig
 
 	init_rwsem(&device->uuid_sem);
 
-	q = blk_alloc_queue(drbd_make_request, NUMA_NO_NODE);
+	q = blk_alloc_queue(GFP_KERNEL);
 	if (!q)
 		goto out_no_q;
 	device->rq_queue = q;
-- 
2.17.0

